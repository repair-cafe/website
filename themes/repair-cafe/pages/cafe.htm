title = "Cafe"
url = "/cafes/:slug"
layout = "default"
is_hidden = 0

[cafeDetail]

[eventList]
cafe_slug = "{{ :slug }}"
condensed = 1
events_per_page = 5
==
{% put page %}
<div class="cafe">
    {% set header_image_url = '' %}
    {% set header_image_caption = '' %}
    {% if cafeDetail.cafe.image is not empty %}
        {% set header_image_url = cafeDetail.cafe.image.path %}
        {% set header_image_caption = cafeDetail.cafe.image.title %}
    {% elseif this.theme.repair_cafe_default_image is not empty %}
        {% set header_image_url = this.theme.repair_cafe_default_image|media %}
    {% endif%}
    {% partial 'components/page-header' title=cafeDetail.cafe.title header_image_url=header_image_url header_image_caption=header_image_caption %}
    <div class="page-content">
        <div class="container">
            <div class="row">
                <div class="col-md-8 mb-3">
                    <div class="row">
                        {% set cafe_logo_alt = '' %}
                        {% if cafeDetail.cafe.logo is not empty %}
                            {% set cafe_logo = cafeDetail.cafe.logo.path %}
                            {% set cafe_logo_alt = cafeDetail.cafe.logo.title %}
                        {% elseif this.theme.repair_cafe_default_logo is not empty %}
                            {% set cafe_logo = this.theme.repair_cafe_default_logo|media %}
                        {% endif %}

                        {% if cafe_logo|default %}
                            <div class="col-3 col-lg-2">
                                <img class="img-fluid" src="{{ cafe_logo }}" alt="{{ (cafe_logo_alt ? cafe_logo_alt : cafeDetail.cafe.title) }}">
                            </div>
                        {% endif %}

                        <div class="col-9 col-lg-10">
                            <div class="richeditor-content">
                                {{ cafeDetail.cafe.description|raw }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 mb-3">
                    {% set formatted_address = cafeDetail.cafe.getFormattedAddress %}
                    {% if formatted_address or cafeDetail.cafe.website_link or cafeDetail.cafe.contact_link or cafeDetail.cafe.facebook or cafeDetail.cafe.twitter or cafeDetail.cafe.instagram %}
                        <ul class="fa-ul small">
                            {% if formatted_address %}
                                <li><i class="fa-li fa fa-home"></i><a href="{{ cafeDetail.cafe.getExternalMapURL }}">{{ formatted_address }}</a></li>
                            {% endif %}
                            {% if cafeDetail.cafe.website_link %}
                                <li><i class="fa-li fa fa-globe"></i><a href="{{ cafeDetail.cafe.website_link }}" class="break-word">{{ cafeDetail.cafe.website_link }}</a></li>
                            {% endif %}
                            {% if cafeDetail.cafe.contact_link %}
                                <li><i class="fa-li fa fa-pencil-square-o"></i><a href="{{ cafeDetail.cafe.contact_link }}">{{ 'page.cafe.contact_link'|_ }}</a></li>
                            {% endif %}
                            {% if cafeDetail.cafe.facebook %}
                                <li><i class="fa-li fa fa-facebook-official"></i><a href="{{ cafeDetail.cafe.facebook }}">{{ 'page.cafe.facebook'|_ }}</a></li>
                            {% endif %}
                            {% if cafeDetail.cafe.twitter %}
                                <li><i class="fa-li fa fa-twitter"></i><a href="{{ cafeDetail.cafe.twitter }}">{{ 'page.cafe.twitter'|_ }}</a></li>
                            {% endif %}
                            {% if cafeDetail.cafe.instagram %}
                                <li><i class="fa-li fa fa-instagram"></i><a href="{{ cafeDetail.cafe.instagram }}">{{ 'page.cafe.instagram'|_ }}</a></li>
                            {% endif %}
                        </ul>
                    {% endif %}
                </div>
            </div>
            {% partial 'components/eventlist' eventList=eventList %}
            {% partial 'components/contacts' contacts=cafeDetail.cafe.contacts %}
        </div>
    </div>
</div>
{% endput %}
